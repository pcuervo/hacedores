function creaMapa(){var e=new google.maps.Map(document.getElementById("mapa"),{zoom:18,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,panControl:!1,scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}});return e}function creaMarkers(e,a){var t={},n=[];return $.each(a,function(a,i){t[a]={},$.each(i,function(e,n){if("object"!=typeof n)return!0;t[a][n]=[];var i=""==n[1]?"19.423325":n[1],o=""==n[2]?"-99.134220":n[2];t[a][n].push({titulo:n[0],lat:i,lon:o,slug:n[3],url:site_url+n[4]+"/"+n[5]})});var o=dameMarkers(a,t[a],e);n=n.concat(o)}),n}function agregaFiltrosMarkers(e,a,t){$.each(t,function(t,n){$("li."+t).on("click",function(){filtraMarkerCategoria(t,a,e)}),$.each(n,function(n,i){return"object"!=typeof i?!0:($("ul.sub-"+t+" li."+i[3]).on("click",function(){filtraMarkerSubCategoria(t,i[3],a,e)}),void 0)})})}function agregaFiltrosTodos(e,a){$("li.todos").on("click",function(){$.each(a,function(e,a){a.setVisible(!0)}),autoCenter(e,a)})}function dameMarkers(e,a,t){if(isEmpty(a))return new Array;var n,i=new Array;ubicaciones=[],$.each(a,function(e,a){$.each(a,function(e,a){var t=[],n="<h3>"+a.titulo+'</h3><a href="'+a.url+'">MÃ¡s info</a>';t.push(e),t.push(a.lat),t.push(a.lon),t.push(n),t.push(a.slug),ubicaciones.push(t)})});for(var o=dameIconPath(e),r=0;r<ubicaciones.length;r++)n=new google.maps.Marker({position:new google.maps.LatLng(ubicaciones[r][1],ubicaciones[r][2]),map:t,icon:o,category:e,subcategory:ubicaciones[r][4]}),i.push(n),google.maps.event.addListener(n,"click",function(e,a){var n=new google.maps.InfoWindow({maxWidth:500});return n.setContent(ubicaciones[a][3]),function(){n.open(t,e)}}(n,r));return i}function filtraMarkerCategoria(e,a,t){var n=a.filter(function(a){return a.category==e});$.each(a,function(e,a){a.setVisible(!1)});var i=[];$.each(n,function(e,a){a.setVisible(!0),i.push(a)}),autoCenter(t,i)}function filtraMarkerSubCategoria(e,a,t,n){var i=t.filter(function(t){return t.subcategory==a&&t.category==e});$.each(t,function(e,a){a.setVisible(!1)});var o=[];$.each(i,function(e,a){a.setVisible(!0),o.push(a)}),autoCenter(n,o)}function autoCenter(e,a){var t=new google.maps.LatLngBounds;$.each(a,function(e,a){t.extend(a.position)}),e.fitBounds(t);var n=google.maps.event.addListener(e,"idle",function(){e.getZoom()>17&&e.setZoom(17),google.maps.event.removeListener(n)})}function dameIconPath(e){switch(e){case"hacedores":icon_path=theme_path+"images/marker-hacedores.png";break;case"evento":icon_path=theme_path+"images/marker-eventos.png";break;case"recurso":icon_path=theme_path+"images/marker-espacios.png";break;case"proyecto":icon_path=theme_path+"images/marker-proyectos.png"}return icon_path}function isEmpty(e){var a=Object.prototype.hasOwnProperty;if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(a.call(e,t))return!1;return!0}function displayMapMenu(e){$("li."+e+" + ul").css("display","block")}!function(e){"use strict";e(function(){window.validateEmail=function(e){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(e)},window.getFormData=function(a){var t=[],n=e(a).serializeArray();return e.map(n,function(e){t[e.name]=e.value}),t}}),e(document).ready(function(){e("#thing-with-videos").fitVids()}),e(document).ready(function(){e("#menu-movil").mmenu()}),e(function(){var a=function(){e('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},t=function(){e("#imagelightbox-loading").remove()},n=function(){e('<div id="imagelightbox-overlay"></div>').appendTo("body")},i=function(){e("#imagelightbox-overlay").remove()},o=function(a){e('<a id="imagelightbox-close" title="Close"></a>').appendTo("body").on("click touchend",function(){return e(this).remove(),a.quitImageLightbox(),!1})},r=function(){e("#imagelightbox-close").remove()},s=function(){var a=e('a[href="'+e("#imagelightbox").attr("src")+'"] img').attr("alt");a.length>0&&e('<div id="imagelightbox-caption">'+a+"</div>").appendTo("body")},c=function(){e("#imagelightbox-caption").remove()},l=function(a,t){var n=e(t);if(n.length){for(var i=e('<div id="imagelightbox-nav"></div>'),o=0;o<n.length;o++)i.append('<button type="button"></button>');i.appendTo("body"),i.on("click touchend",function(){return!1});var r=i.find("button");r.on("click touchend",function(){var t=e(this);return n.eq(t.index()).attr("href")!=e("#imagelightbox").attr("src")&&a.switchImageLightbox(t.index()),r.removeClass("active"),r.eq(t.index()).addClass("active"),!1}).on("touchend",function(){return!1})}},u=function(a){var t=e("#imagelightbox-nav button");t.removeClass("active"),t.eq(e(a).filter('[href="'+e("#imagelightbox").attr("src")+'"]').index(a)).addClass("active")},d=function(){e("#imagelightbox-nav").remove()},m=function(a,t){var n=e('<i class="fa fa-chevron-left imagelightbox-arrow imagelightbox-arrow-left"></i><i class="fa fa-chevron-right imagelightbox-arrow imagelightbox-arrow-right"></i>');n.appendTo("body"),n.on("click touchend",function(n){n.preventDefault();var i=e(this),o=e(t+'[href="'+e("#imagelightbox").attr("src")+'"]'),r=o.index(t);return i.hasClass("imagelightbox-arrow-left")?(r-=1,e(t).eq(r).length||(r=e(t).length)):(r+=1,e(t).eq(r).length||(r=0)),a.switchImageLightbox(r),!1})},f=function(){e(".imagelightbox-arrow").remove()};e('a[data-imagelightbox="a"]').imageLightbox({onLoadStart:function(){a()},onLoadEnd:function(){t()},onEnd:function(){t()}}),e('a[data-imagelightbox="b"]').imageLightbox({onStart:function(){n()},onEnd:function(){i(),t()},onLoadStart:function(){a()},onLoadEnd:function(){t()}});var p=e('a[data-imagelightbox="c"]').imageLightbox({quitOnDocClick:!1,onStart:function(){o(p)},onEnd:function(){r(),t()},onLoadStart:function(){a()},onLoadEnd:function(){t()}});e('a[data-imagelightbox="d"]').imageLightbox({onLoadStart:function(){c(),a()},onLoadEnd:function(){s(),t()},onEnd:function(){c(),t()}});var h='a[data-imagelightbox="g"]',v=e(h).imageLightbox({onStart:function(){m(v,h)},onEnd:function(){f(),t()},onLoadStart:function(){a()},onLoadEnd:function(){e(".imagelightbox-arrow").css("display","block"),t()}}),g='a[data-imagelightbox="e"]',b=e(g).imageLightbox({onStart:function(){l(b,g)},onEnd:function(){d(),t()},onLoadStart:function(){a()},onLoadEnd:function(){u(g),t()}}),_='a[data-imagelightbox="f"]',$=e(_).imageLightbox({onStart:function(){n(),o($),m($,_)},onEnd:function(){i(),c(),r(),f(),t()},onLoadStart:function(){c(),a()},onLoadEnd:function(){s(),t(),e(".imagelightbox-arrow").css("display","block")}})}),e(".trigger").on("click",function(){e(".content").hide("fade"),e("."+e(this).data("rel")).show("fade")}),e(".js-abrir-modal").on("click",function(){e("div").removeClass("mm-slideout"),e(".modal").css("display","inline-block")}),e(".js-cerrar-modal").on("click",function(){e(".modal").css("display","none"),e("div").addClass("mm-slideout")})}(jQuery);var $=jQuery.noConflict();